[gd_scene load_steps=15 format=3 uid="uid://bufbmn8exlg6w"]

[ext_resource type="Script" path="res://scripts/player/player.gd" id="1_q7jwx"]
[ext_resource type="SpriteFrames" uid="uid://bg0c4v2j12qq1" path="res://assets/sprite_animations/player.tres" id="2_1rv08"]
[ext_resource type="Shader" path="res://assets/shaders/player.gdshader" id="2_81qsh"]
[ext_resource type="Script" path="res://scripts/player/player_stats.gd" id="2_ldm03"]
[ext_resource type="PackedScene" uid="uid://dvku028330g1q" path="res://scenes/components/velocity_component.tscn" id="3_r5m85"]
[ext_resource type="Script" path="res://scripts/player/player_camera.gd" id="4_teusl"]
[ext_resource type="Script" path="res://scripts/state_machine/state_machine.gd" id="5_frss8"]
[ext_resource type="Script" path="res://scripts/state_machine/idle_state.gd" id="6_ncibh"]
[ext_resource type="Script" path="res://scripts/state_machine/walk_state.gd" id="7_lhuwq"]
[ext_resource type="Script" path="res://scripts/state_machine/shoot_state.gd" id="8_40dxe"]

[sub_resource type="Resource" id="Resource_un8k1"]
script = ExtResource("2_ldm03")
distance_walked = 0.0
enemies_killed = 0
damage_dealt = 0
damage_taken = 0
experience = 0
stats = {
"att": 17,
"def": 0,
"dex": 17,
"hp": 100,
"mp": 100,
"spd": 17,
"vit": 5,
"wis": 23
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wdsyv"]
shader = ExtResource("2_81qsh")

[sub_resource type="Gradient" id="Gradient_1adxy"]
interpolation_mode = 2
colors = PackedColorArray(0.357986, 0.16377, 0.544524, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_3bm4d"]
gradient = SubResource("Gradient_1adxy")
fill = 1
fill_from = Vector2(0.508547, 0.465812)
fill_to = Vector2(0.854701, 0.166667)

[node name="Player" type="CharacterBody2D"]
motion_mode = 1
script = ExtResource("1_q7jwx")
stats = SubResource("Resource_un8k1")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
modulate = Color(24.325, 37.838, 38.379, 1)
texture_filter = 1
material = SubResource("ShaderMaterial_wdsyv")
sprite_frames = ExtResource("2_1rv08")
animation = &"shoot_right"

[node name="VelocityComponent" parent="." instance=ExtResource("3_r5m85")]
max_velocity = 100.0
acceleration = 4.0
friction = 2.0
stop_speed = 50.0

[node name="PlayerCamera" type="Camera2D" parent="." node_paths=PackedStringArray("target_node", "velocity_component")]
top_level = true
ignore_rotation = false
zoom = Vector2(5.49, 5.49)
process_callback = 0
script = ExtResource("4_teusl")
target_node = NodePath("..")
velocity_component = NodePath("../VelocityComponent")

[node name="PointLight2D" type="PointLight2D" parent="."]
visible = false
texture = SubResource("GradientTexture2D_3bm4d")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("5_frss8")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine" node_paths=PackedStringArray("sprite", "player")]
script = ExtResource("6_ncibh")
sprite = NodePath("../../AnimatedSprite2D")
player = NodePath("../..")

[node name="Walk" type="Node" parent="StateMachine" node_paths=PackedStringArray("sprite", "player")]
script = ExtResource("7_lhuwq")
sprite = NodePath("../../AnimatedSprite2D")
player = NodePath("../..")

[node name="Shoot" type="Node" parent="StateMachine" node_paths=PackedStringArray("sprite", "player")]
script = ExtResource("8_40dxe")
sprite = NodePath("../../AnimatedSprite2D")
player = NodePath("../..")
